<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Case Studies | User Guide: The ALSroads Package</title>
  <meta name="description" content="A user guide for road extraction using the ALSroads package" />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Case Studies | User Guide: The ALSroads Package" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="A user guide for road extraction using the ALSroads package" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Case Studies | User Guide: The ALSroads Package" />
  
  <meta name="twitter:description" content="A user guide for road extraction using the ALSroads package" />
  

<meta name="author" content="Ilythia D. Morley, Jean-Romain Roussel" />


<meta name="date" content="2022-12-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="sec-standard-parameters.html"/>
<link rel="next" href="sec-tips-and-tricks.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script>
<script src="libs/FlatGeoBuf-3.21.3/fgb.js"></script>
<script src="libs/FlatGeoBuf-3.21.3/flatgeobuf-geojson.min.js"></script>
<script src="libs/chromajs-2.1.0/chroma.min.js"></script>
<link id="ctg-1-attachment" rel="attachment" href="libs/ctg-0.0.1/ctg_layer.fgb"/>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />
<link id="Water-1-attachment" rel="attachment" href="libs/Water-0.0.1/Water_layer.fgb"/>
<link id="RoadSegments-1-attachment" rel="attachment" href="libs/RoadSegments-0.0.1/RoadSegments_layer.fgb"/>
<link id="Inaccurate-1-attachment" rel="attachment" href="libs/Inaccurate-0.0.1/Inaccurate_layer.fgb"/>
<link id="Corrected-1-attachment" rel="attachment" href="libs/Corrected-0.0.1/Corrected_layer.fgb"/>
<link id="CorrectedRoad-1-attachment" rel="attachment" href="libs/CorrectedRoad-0.0.1/CorrectedRoad_layer.fgb"/>
<link id="RoadWidthBuffer-1-attachment" rel="attachment" href="libs/RoadWidthBuffer-0.0.1/RoadWidthBuffer_layer.fgb"/>
<link id="Waferboard_Road-1-attachment" rel="attachment" href="libs/Waferboard_Road-0.0.1/Waferboard_Road_layer.fgb"/>
<link id="Existing-1-attachment" rel="attachment" href="libs/Existing-0.0.1/Existing_layer.fgb"/>
<link id="Updated-1-attachment" rel="attachment" href="libs/Updated-0.0.1/Updated_layer.fgb"/>
<link id="Snapped-1-attachment" rel="attachment" href="libs/Snapped-0.0.1/Snapped_layer.fgb"/>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="sec-road-extraction-data-requirements.html"><a href="sec-road-extraction-data-requirements.html"><i class="fa fa-check"></i><b>2</b> Road Extraction Data Requirements</a>
<ul>
<li class="chapter" data-level="2.1" data-path="sec-road-extraction-data-requirements.html"><a href="sec-road-extraction-data-requirements.html#sec-lidar-data"><i class="fa fa-check"></i><b>2.1</b> LiDAR Data</a></li>
<li class="chapter" data-level="2.2" data-path="sec-road-extraction-data-requirements.html"><a href="sec-road-extraction-data-requirements.html#sec-dtm-data"><i class="fa fa-check"></i><b>2.2</b> DTM Data</a></li>
<li class="chapter" data-level="2.3" data-path="sec-road-extraction-data-requirements.html"><a href="sec-road-extraction-data-requirements.html#sec-existing-road-network"><i class="fa fa-check"></i><b>2.3</b> Existing Road Network</a></li>
<li class="chapter" data-level="2.4" data-path="sec-road-extraction-data-requirements.html"><a href="sec-road-extraction-data-requirements.html#sec-water-bodies"><i class="fa fa-check"></i><b>2.4</b> Water Bodies (optional)</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="sec-reading-generating-and-plotting-input-data.html"><a href="sec-reading-generating-and-plotting-input-data.html"><i class="fa fa-check"></i><b>3</b> Reading, Generating, and Plotting Input Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="sec-reading-generating-and-plotting-input-data.html"><a href="sec-reading-generating-and-plotting-input-data.html#sec-reading-lidar-data"><i class="fa fa-check"></i><b>3.1</b> Reading LiDAR data</a></li>
<li class="chapter" data-level="3.2" data-path="sec-reading-generating-and-plotting-input-data.html"><a href="sec-reading-generating-and-plotting-input-data.html#sec-reading-lidar-data-using-readlascatalog"><i class="fa fa-check"></i><b>3.2</b> Reading LiDAR data using <code>readLAScatalog</code></a></li>
<li class="chapter" data-level="3.3" data-path="sec-reading-generating-and-plotting-input-data.html"><a href="sec-reading-generating-and-plotting-input-data.html#sec-reading-and-generating-dtm-raster-data"><i class="fa fa-check"></i><b>3.3</b> Reading and Generating DTM Raster Data</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="sec-reading-generating-and-plotting-input-data.html"><a href="sec-reading-generating-and-plotting-input-data.html#sec-reading-raster-dtm-data-using-raster"><i class="fa fa-check"></i><b>3.3.1</b> Reading a raster DTM using <code>raster</code></a></li>
<li class="chapter" data-level="3.3.2" data-path="sec-reading-generating-and-plotting-input-data.html"><a href="sec-reading-generating-and-plotting-input-data.html#sec-generating-dtm-data-using-grid_terrain"><i class="fa fa-check"></i><b>3.3.2</b> Generating DTM data using <code>rasterize_terrain()</code></a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="sec-reading-generating-and-plotting-input-data.html"><a href="sec-reading-generating-and-plotting-input-data.html#sec-reading-vector-road-data-using-st_read"><i class="fa fa-check"></i><b>3.4</b> Reading Vector Road Data using <code>st_read()</code></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="sec-road-extraction-using-alsroads.html"><a href="sec-road-extraction-using-alsroads.html"><i class="fa fa-check"></i><b>4</b> Road Extraction with <code>ALSroads</code></a>
<ul>
<li class="chapter" data-level="4.1" data-path="sec-road-extraction-using-alsroads.html"><a href="sec-road-extraction-using-alsroads.html#sec-standard-road-extraction-using-measure_roads"><i class="fa fa-check"></i><b>4.1</b> Standard Road Extraction using <code>measure_roads()</code></a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="sec-road-extraction-using-alsroads.html"><a href="sec-road-extraction-using-alsroads.html#sec-required-r-packages"><i class="fa fa-check"></i><b>4.1.1</b> Required R Packages:</a></li>
<li class="chapter" data-level="4.1.2" data-path="sec-road-extraction-using-alsroads.html"><a href="sec-road-extraction-using-alsroads.html#sec-input-data"><i class="fa fa-check"></i><b>4.1.2</b> Input Data</a></li>
<li class="chapter" data-level="4.1.3" data-path="sec-road-extraction-using-alsroads.html"><a href="sec-road-extraction-using-alsroads.html#sec-network-update"><i class="fa fa-check"></i><b>4.1.3</b> Network Update</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="sec-road-extraction-using-alsroads.html"><a href="sec-road-extraction-using-alsroads.html#sec-applying-measure_roads"><i class="fa fa-check"></i><b>4.2</b> Applying <code>measure_roads()</code></a></li>
<li class="chapter" data-level="4.3" data-path="sec-road-extraction-using-alsroads.html"><a href="sec-road-extraction-using-alsroads.html#sec-spatial-plotting-updated-roads"><i class="fa fa-check"></i><b>4.3</b> Spatial Plotting Updated Roads</a></li>
<li class="chapter" data-level="4.4" data-path="sec-road-extraction-using-alsroads.html"><a href="sec-road-extraction-using-alsroads.html#sec-attribute-plotting-updated-roads"><i class="fa fa-check"></i><b>4.4</b> Attribute Plotting Updated Roads</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="sec-standard-parameters.html"><a href="sec-standard-parameters.html"><i class="fa fa-check"></i><b>5</b> Standard Parameters</a>
<ul>
<li class="chapter" data-level="5.1" data-path="sec-standard-parameters.html"><a href="sec-standard-parameters.html#sec-extraction-parameters"><i class="fa fa-check"></i><b>5.1</b> Extraction Parameters:</a></li>
<li class="chapter" data-level="5.2" data-path="sec-standard-parameters.html"><a href="sec-standard-parameters.html#sec-embankment-parameters"><i class="fa fa-check"></i><b>5.2</b> Embankment Parameters:</a></li>
<li class="chapter" data-level="5.3" data-path="sec-standard-parameters.html"><a href="sec-standard-parameters.html#sec-terrain-parameters"><i class="fa fa-check"></i><b>5.3</b> Terrain Parameters (excluding embankment):</a></li>
<li class="chapter" data-level="5.4" data-path="sec-standard-parameters.html"><a href="sec-standard-parameters.html#sec-vegetation-parameters"><i class="fa fa-check"></i><b>5.4</b> Vegetation:</a></li>
<li class="chapter" data-level="5.5" data-path="sec-standard-parameters.html"><a href="sec-standard-parameters.html#sec-conductivity-parameters"><i class="fa fa-check"></i><b>5.5</b> Conductivity Parameters:</a></li>
<li class="chapter" data-level="5.6" data-path="sec-standard-parameters.html"><a href="sec-standard-parameters.html#sec-state-parameters"><i class="fa fa-check"></i><b>5.6</b> Road State Parameters:</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="sec-case-studies.html"><a href="sec-case-studies.html"><i class="fa fa-check"></i><b>6</b> Case Studies</a>
<ul>
<li class="chapter" data-level="6.1" data-path="sec-case-studies.html"><a href="sec-case-studies.html#case-study-structure"><i class="fa fa-check"></i><b>6.1</b> Case Study Structure:</a></li>
<li class="chapter" data-level="6.2" data-path="sec-case-studies.html"><a href="sec-case-studies.html#sec-case-study-low-dtm-complexity"><i class="fa fa-check"></i><b>6.2</b> Case Study 1: Low DTM Complexity</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="sec-case-studies.html"><a href="sec-case-studies.html#overview"><i class="fa fa-check"></i><b>6.2.1</b> Overview:</a></li>
<li class="chapter" data-level="6.2.2" data-path="sec-case-studies.html"><a href="sec-case-studies.html#sec-method-and-application"><i class="fa fa-check"></i><b>6.2.2</b> Data, Method, and Application:</a></li>
<li class="chapter" data-level="6.2.3" data-path="sec-case-studies.html"><a href="sec-case-studies.html#sec-results"><i class="fa fa-check"></i><b>6.2.3</b> Results</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="sec-case-studies.html"><a href="sec-case-studies.html#case-study-2-road-detection-over-water"><i class="fa fa-check"></i><b>6.3</b> Case Study 2: Road Detection over Water</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="sec-case-studies.html"><a href="sec-case-studies.html#overview-1"><i class="fa fa-check"></i><b>6.3.1</b> Overview</a></li>
<li class="chapter" data-level="6.3.2" data-path="sec-case-studies.html"><a href="sec-case-studies.html#data-method-and-application"><i class="fa fa-check"></i><b>6.3.2</b> Data, Method, and Application</a></li>
<li class="chapter" data-level="6.3.3" data-path="sec-case-studies.html"><a href="sec-case-studies.html#results"><i class="fa fa-check"></i><b>6.3.3</b> Results</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="sec-case-studies.html"><a href="sec-case-studies.html#case-study-3-detecting-narrow-roads"><i class="fa fa-check"></i><b>6.4</b> Case Study 3: Detecting Narrow Roads</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="sec-case-studies.html"><a href="sec-case-studies.html#overview-2"><i class="fa fa-check"></i><b>6.4.1</b> Overview</a></li>
<li class="chapter" data-level="6.4.2" data-path="sec-case-studies.html"><a href="sec-case-studies.html#data-method-and-application-1"><i class="fa fa-check"></i><b>6.4.2</b> Data, Method, and Application</a></li>
<li class="chapter" data-level="6.4.3" data-path="sec-case-studies.html"><a href="sec-case-studies.html#results-1"><i class="fa fa-check"></i><b>6.4.3</b> Results</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="sec-case-studies.html"><a href="sec-case-studies.html#case-study-4-detecting-a-road-covered-by-deciduous-trees"><i class="fa fa-check"></i><b>6.5</b> Case study 4: Detecting a Road Covered by Deciduous Trees</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="sec-case-studies.html"><a href="sec-case-studies.html#overview-3"><i class="fa fa-check"></i><b>6.5.1</b> Overview</a></li>
<li class="chapter" data-level="6.5.2" data-path="sec-case-studies.html"><a href="sec-case-studies.html#data-method-and-application-2"><i class="fa fa-check"></i><b>6.5.2</b> Data, Method, and Application</a></li>
<li class="chapter" data-level="6.5.3" data-path="sec-case-studies.html"><a href="sec-case-studies.html#results-2"><i class="fa fa-check"></i><b>6.5.3</b> Results:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="sec-tips-and-tricks.html"><a href="sec-tips-and-tricks.html"><i class="fa fa-check"></i><b>7</b> Tips and Tricks</a>
<ul>
<li class="chapter" data-level="7.1" data-path="sec-tips-and-tricks.html"><a href="sec-tips-and-tricks.html#sec-casting-roads-to-linestring"><i class="fa fa-check"></i><b>7.1</b> Casting Roads to Linestring</a></li>
<li class="chapter" data-level="7.2" data-path="sec-tips-and-tricks.html"><a href="sec-tips-and-tricks.html#sec-adding-an-id-column"><i class="fa fa-check"></i><b>7.2</b> Adding an ID Column</a></li>
<li class="chapter" data-level="7.3" data-path="sec-tips-and-tricks.html"><a href="sec-tips-and-tricks.html#sec-selecting-specific-roads"><i class="fa fa-check"></i><b>7.3</b> Selecting Specific Roads</a></li>
<li class="chapter" data-level="7.4" data-path="sec-tips-and-tricks.html"><a href="sec-tips-and-tricks.html#sec-plotting-data"><i class="fa fa-check"></i><b>7.4</b> Plotting Data</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="sec-tips-and-tricks.html"><a href="sec-tips-and-tricks.html#sec-interactive-spatial-plotting"><i class="fa fa-check"></i><b>7.4.1</b> Interactive Spatial Plotting with <code>mapView()</code>:</a></li>
<li class="chapter" data-level="7.4.2" data-path="sec-tips-and-tricks.html"><a href="sec-tips-and-tricks.html#sec-spatial-plotting-with-plot"><i class="fa fa-check"></i><b>7.4.2</b> Spatial Plotting with <code>plot()</code>:</a></li>
<li class="chapter" data-level="7.4.3" data-path="sec-tips-and-tricks.html"><a href="sec-tips-and-tricks.html#sec-plotting-with-ggplot"><i class="fa fa-check"></i><b>7.4.3</b> Plotting with <code>ggplot()</code>:</a></li>
<li class="chapter" data-level="7.4.4" data-path="sec-tips-and-tricks.html"><a href="sec-tips-and-tricks.html#sec-plotting-lidar-data"><i class="fa fa-check"></i><b>7.4.4</b> Plotting LiDAR data:</a></li>
<li class="chapter" data-level="7.4.5" data-path="sec-tips-and-tricks.html"><a href="sec-tips-and-tricks.html#sec-3d-plotting-raster-data"><i class="fa fa-check"></i><b>7.4.5</b> 3D Plotting Raster Data:</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="sec-tips-and-tricks.html"><a href="sec-tips-and-tricks.html#sec-saving-data"><i class="fa fa-check"></i><b>7.5</b> Saving Data</a></li>
<li class="chapter" data-level="7.6" data-path="sec-tips-and-tricks.html"><a href="sec-tips-and-tricks.html#sec-reconnecing-roads"><i class="fa fa-check"></i><b>7.6</b> Reconnecting Roads</a></li>
<li class="chapter" data-level="7.7" data-path="sec-tips-and-tricks.html"><a href="sec-tips-and-tricks.html#sec-rrtudio_shortcuts"><i class="fa fa-check"></i><b>7.7</b> RStudio Shortcuts</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="sec-getting-started-with-r.html"><a href="sec-getting-started-with-r.html"><i class="fa fa-check"></i><b>8</b> Getting Started with R</a>
<ul>
<li class="chapter" data-level="8.1" data-path="sec-getting-started-with-r.html"><a href="sec-getting-started-with-r.html#sec-installing-r-and-rstudio"><i class="fa fa-check"></i><b>8.1</b> Installing R and RStudio</a></li>
<li class="chapter" data-level="8.2" data-path="sec-getting-started-with-r.html"><a href="sec-getting-started-with-r.html#sec-installing-alsroad"><i class="fa fa-check"></i><b>8.2</b> Installing <code>ALSroads</code></a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="sec-team.html"><a href="sec-team.html"><i class="fa fa-check"></i><b>9</b> Project Team Members</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">User Guide: The <code>ALSroads</code> Package</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="sec-case-studies" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">6</span> Case Studies<a href="sec-case-studies.html#sec-case-studies" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this section, we present four example applications of the <code>measure_road()</code> function. These case studies are located in different forests where road conditions and landscape characteristics are unique. We provide examples where the <code>measure_road()</code> standard parameters (see section <a href="sec-standard-parameters.html#sec-standard-parameters">5</a>) are effective and examples where these parameters may require tuning.</p>
<ul>
<li><strong>Case Study 1: Low DTM Complexity</strong></li>
<li><strong>Case Study 2: Road Detection over Water</strong></li>
<li><strong>Case Study 3: Narrow Road Detection</strong></li>
<li><strong>Case Study 4: Detecting a Road Covered by Deciduous Trees</strong></li>
</ul>
<div id="case-study-structure" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Case Study Structure:<a href="sec-case-studies.html#case-study-structure" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>For each case study, we include code snippets outlining how to:</p>
<ol style="list-style-type: decimal">
<li>Read the required input data (refer to section <a href="sec-reading-generating-and-plotting-input-data.html#sec-reading-generating-and-plotting-input-data">3</a> for detailed information).</li>
<li>Check the Coordinate Reference System (CRS) of the input data and clip the existing road network to the spatial extent of the LAS catalog.</li>
<li>Update the existing road network using the <code>measure_roads()</code> function from the <code>ALSroads</code> package.</li>
<li>Adjust the standard road extraction parameters to improve method accuracy (see section <a href="sec-standard-parameters.html#sec-standard-parameters">5</a> for information on the standard parameters).</li>
<li>Visualize road extraction results.</li>
</ol>
<p>Each case study is ‘stand-alone’, and users do not need to refer to other sections of the user guide. As such, some code snippets, such as loading data, are repeated for each case study.</p>
</div>
<div id="sec-case-study-low-dtm-complexity" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Case Study 1: Low DTM Complexity<a href="sec-case-studies.html#sec-case-study-low-dtm-complexity" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="overview" class="section level3 hasAnchor" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> Overview:<a href="sec-case-studies.html#overview" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The road extraction method developed by <a href="https://www.sciencedirect.com/science/article/pii/S1569843222002084#d1e1483">Roussel et al. (2022)</a> uses the geometry of the terrain to relocate and measure the roads correctly. Under ideal circumstances, a road is expected to be flat with steep slopes on its edges (shoulders or embankments). The road is embedded within an environment and surrounded by complex and non-flat topography.</p>
<p>Under these assumptions, a road is not that hard to find and measure. However, problems arise when there is no geometry to detect. This may happen, for example, if the roads are not shaped with ditches on their sides. In this case, the algorithm is supposed to work with a “rescue method” (see section <a href="sec-standard-parameters.html#sec-terrain-parameters">5.3</a>) that does not use the shoulders but instead the terrain complexity.</p>
<p>Ultimately, if the terrain is perfectly flat, there are no geometrical features that can be used to detect the road. In the following example, we present a method for adjusting the <code>measure_roads()</code> standard parameters to detect roads in a landscape where the topography is almost perfectly flat, roads are not nicely shaped, and standard road extraction is challenging.</p>
<p>As the 3D plot of the ground points demonstrates here, the road is easily identifiable, but no geometrical feature can be used to measure it. The road is flat in a flat environment.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="sec-case-studies.html#cb21-1" aria-hidden="true" tabindex="-1"></a>las <span class="ot">&lt;-</span>  <span class="fu">readLAS</span>(<span class="st">&quot;data/06/01/road_10462.las&quot;</span>)</span>
<span id="cb21-2"><a href="sec-case-studies.html#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">filter_ground</span>(las), <span class="at">bg =</span> <span class="st">&quot;white&quot;</span>)</span></code></pre></div>
<p>The road extraction method computes a conductivity layer from the point cloud to estimate how easy/difficult it is for an agent to move between two adjacent pixels. Let’s look at the conductivity layer of the road in this case study:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="sec-case-studies.html#cb22-1" aria-hidden="true" tabindex="-1"></a>sig <span class="ot">&lt;-</span> ALSroads<span class="sc">::</span><span class="fu">rasterize_conductivity</span>(las, dtm_cs1)</span>
<span id="cb22-2"><a href="sec-case-studies.html#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ........</span></span>
<span id="cb22-3"><a href="sec-case-studies.html#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(sig, <span class="at">col =</span> viridis<span class="sc">::</span><span class="fu">inferno</span>(<span class="dv">50</span>))</span></code></pre></div>
<p><img src="ALSroads-book_files/figure-html/sigplot-1.png" width="768"  style="display: block; margin: auto;" /></p>
<p>As we can see, the conductivity map is perfect. Geometrical features (shoulders or embankments) are not that important to locate the road. Many other features are used, including vegetation and the local density of points. Thus the road centerline will be perfectly relocated even if the road is flat in a flat environment.</p>
<p>The measurement of the road width is likely to fail because of the absence of clear geometry (shoulders or embankments). Below we can see a slice of the point cloud perpendicularly to the road. For a better understanding of the figure, users should refer to section <a href="sec-standard-parameters.html#sec-standard-parameters">5</a>. The key focus of this figure is the red and green arrows that represent the total road width and the drivable width, respectively. The algorithm has determined the road to be 21 m wide, which is clearly incorrect in this case study. The algorithm overestimates the road width in this case study because the landscape surrounding the road is perfectly flat, and there is nothing to constrain the road width.</p>
<p><img src="images/slice_dtm_flat_1.png" /></p>
<p>By altering the default <code>measure_roads()</code> parameter to be more aggressive and less tolerant to various sources of noise, we can relocate the road more accurately.</p>
<p><img src="images/slice_dtm_flat_2.png" /></p>
<p>In this specific slice, 6 m is probably a minor underestimation of the actual road width. Users must remember that measurements are performed on numerous consecutive slices and averaged (see section <a href="sec-standard-parameters.html#sec-extraction-parameters">5.1</a> for information on road slices). For this specific road, the default parameters result in the road being classified as a 13.6 m wide (total width) ‘Class 2’ road. Once the parameters are adjusted, the road is classified as a 7.6 m (total width) ‘Class 1’ road. The custom parameters result in a road width and road Class more representative of the actual road.</p>
<p>If the method classifies the road width as 13.6 m, many points will be found above the road (i.e., vegetation). This interpretation impacts the road classification (see section <a href="sec-standard-parameters.html#sec-state-parameters">5.6</a>) as the method assesses the road as having vegetation on it, which would limit road drivability. However, suppose the actual road width is only 7.6 m. In that case, the algorithm will not find vegetation on the road, as this vegetation is beyond the road edge boundaries, and the road will be determined to be a very clean ‘Class 1’ road.</p>
<p>Tuning the `measure_roads()` parameters on a road-by-road basis is impossible and unsuitable for updating extensive forest road networks. Doing so would defeat the method’s purpose, which is automatically updating road networks. Instead of tuning parameters to suit individual roads, users should tune parameters by landscape.</p>
<p>In this case study, the custom parameters work well, but the default parameters are generally preferable. It is important to remember that this is an <strong>edge case</strong> and represents an extreme scenario.</p>
</div>
<div id="sec-method-and-application" class="section level3 hasAnchor" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> Data, Method, and Application:<a href="sec-case-studies.html#sec-method-and-application" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The following sections present example code and method implementation for adjusting <code>measure_roads()</code> parameters in a low DTM complexity case study.</p>
<div id="sec-required-r-packages" class="section level4 hasAnchor" number="6.2.2.1">
<h4><span class="header-section-number">6.2.2.1</span> Required R Packages:<a href="sec-road-extraction-using-alsroads.html#sec-required-r-packages" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="sec-case-studies.html#cb23-1" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;Jean-Romain/ALSroads&quot;</span>) <span class="co">#Install the ALSroads Package</span></span>
<span id="cb23-2"><a href="sec-case-studies.html#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="sec-case-studies.html#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;ALSroads&quot;</span>) </span>
<span id="cb23-4"><a href="sec-case-studies.html#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;lidR&quot;</span>)</span>
<span id="cb23-5"><a href="sec-case-studies.html#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;raster&quot;</span>)</span>
<span id="cb23-6"><a href="sec-case-studies.html#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;sf&quot;</span>)</span>
<span id="cb23-7"><a href="sec-case-studies.html#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;ggplot2&quot;</span>)</span></code></pre></div>
</div>
<div id="sec-loading-data" class="section level4 hasAnchor" number="6.2.2.2">
<h4><span class="header-section-number">6.2.2.2</span> Loading Data:<a href="sec-case-studies.html#sec-loading-data" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="sec-case-studies.html#cb24-1" aria-hidden="true" tabindex="-1"></a>ctg <span class="ot">&lt;-</span> readLAScatalog<span class="st">&quot;path/to/ctg/files&quot;</span>, filter <span class="ot">=</span> <span class="st">&quot;-drop_withheld-keep_random_fraction 0.25&quot;</span><span class="er">)</span></span>
<span id="cb24-2"><a href="sec-case-studies.html#cb24-2" aria-hidden="true" tabindex="-1"></a>dtm <span class="ot">&lt;-</span> <span class="fu">raster</span>(<span class="st">&quot;path/to/dtm.tif&quot;</span>)</span>
<span id="cb24-3"><a href="sec-case-studies.html#cb24-3" aria-hidden="true" tabindex="-1"></a>roads <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;path/to/roads&quot;</span>)</span>
<span id="cb24-4"><a href="sec-case-studies.html#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="sec-case-studies.html#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(roads) <span class="ot">=</span> <span class="fu">st_crs</span>(ctg)</span>
<span id="cb24-6"><a href="sec-case-studies.html#cb24-6" aria-hidden="true" tabindex="-1"></a>roads <span class="ot">=</span> sf<span class="sc">::</span><span class="fu">st_crop</span>(roads, ctg)</span></code></pre></div>
</div>
<div id="sec-parameter-tuning" class="section level4 hasAnchor" number="6.2.2.3">
<h4><span class="header-section-number">6.2.2.3</span> Road Extraction and Parameter Tuning:<a href="sec-case-studies.html#sec-parameter-tuning" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <code>measure_roads()</code> <strong>terrain parameters</strong> dictate how the method handles DTM complexity (see section <a href="sec-standard-parameters.html#sec-terrain-parameters">5.3</a>). The standard terrain parameters are:</p>
<ol style="list-style-type: decimal">
<li>max_elevation_ground_points: <code>Default = 0.1</code></li>
<li>max_sd_ground_points: <code>Default = 0.15</code></li>
</ol>
<p>In a low DTM complexity area, decreasing the <code>max_elevation_ground_points</code> and <code>max_sd_ground_points</code> improves the accuracy of road extraction. <strong>In this case study, we decrease the <code>max_elevation_ground_points</code> to 0.07 and the <code>max_sd_ground_points</code> to 0.04.</strong></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="sec-case-studies.html#cb25-1" aria-hidden="true" tabindex="-1"></a>custom_param <span class="ot">=</span> alsroads_default_parameters</span>
<span id="cb25-2"><a href="sec-case-studies.html#cb25-2" aria-hidden="true" tabindex="-1"></a>custom_param<span class="sc">$</span>terrain<span class="sc">$</span>max_elevation_ground_points <span class="ot">=</span> <span class="fl">0.07</span></span>
<span id="cb25-3"><a href="sec-case-studies.html#cb25-3" aria-hidden="true" tabindex="-1"></a>custom_param<span class="sc">$</span>terrain<span class="sc">$</span>max_sd_ground_points <span class="ot">=</span> <span class="fl">0.04</span></span>
<span id="cb25-4"><a href="sec-case-studies.html#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="sec-case-studies.html#cb25-5" aria-hidden="true" tabindex="-1"></a>updated_roads_custom_param <span class="ot">&lt;-</span> <span class="fu">measure_roads</span>(<span class="at">ctg =</span> ctg, <span class="at">roads =</span> roads, <span class="at">dtm =</span> dtm, <span class="at">param =</span> custom_param)</span></code></pre></div>
</div>
</div>
<div id="sec-results" class="section level3 hasAnchor" number="6.2.3">
<h3><span class="header-section-number">6.2.3</span> Results<a href="sec-case-studies.html#sec-results" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Plotting the updated road network alongside the existing road network allows the visualization of the updated roads.</p>
<p><img src="ALSroads-book_files/figure-html/unnamed-chunk-8-1.png" width="681.6"  style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="case-study-2-road-detection-over-water" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> Case Study 2: Road Detection over Water<a href="sec-case-studies.html#case-study-2-road-detection-over-water" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="overview-1" class="section level3 hasAnchor" number="6.3.1">
<h3><span class="header-section-number">6.3.1</span> Overview<a href="sec-case-studies.html#overview-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this case study, we use the <code>measure_roads()</code> function to update a road crossing the Mattagami River (rivière Mattagami) in the Romeo Malette Forest, Ontario. The figure below visualizes the LAS tile used in this example and shows the river on the landscape.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="sec-case-studies.html#cb26-1" aria-hidden="true" tabindex="-1"></a>las_c <span class="ot">&lt;-</span> <span class="fu">clip_circle</span>(las, <span class="dv">466200</span>, <span class="dv">5363600</span>, <span class="dv">400</span>)</span>
<span id="cb26-2"><a href="sec-case-studies.html#cb26-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">plot</span>(las_c, <span class="at">bg =</span> <span class="st">&quot;white&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>)</span>
<span id="cb26-3"><a href="sec-case-studies.html#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="fu">add_dtm3d</span>(x, dtm)</span></code></pre></div>
<p><img src="images/las_dtm_circle_river.PNG" /></p>
<p>By plotting the road which crosses the Mattagami River on a base map, using the <code>mapView()</code> function, we can see that part of this road is a bridge. For more information on interactive plotting with <code>mapView(),</code> refer to section <a href="sec-tips-and-tricks.html#sec-interactive-spatial-plotting">7.4.1</a>.</p>
<div id="htmlwidget-a0d85fc1c868ed9f6072" style="width:768px;height:576px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-a0d85fc1c868ed9f6072">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["line",430]},{"method":"addFlatGeoBuf","args":["Waferboard_Road","Waferboard_Road",null,true,"1",{"radius":6,"stroke":true,"color":"#6666FF","weight":2,"opacity":0.9,"fill":false,"fillColor":null,"fillOpacity":1},{"className":"","pane":"line"},"mapview-popup",{"radius":{"to":[3,15],"from":[3,15]},"weight":{"to":[1,10],"from":[1,10]},"opacity":{"to":[0,1],"from":[0,1]},"fillOpacity":{"to":[0,1],"from":[0,1]}}]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[-81.4570400200016,48.4223309830458,-81.4497810140878,48.4269805880969,true,"Waferboard_Road","Zoom to Waferboard_Road","<strong> Waferboard_Road <\/strong>","bottomright"]},{"method":"addLayersControl","args":["Esri.WorldImagery","Waferboard_Road",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#6666FF"],"labels":["Waferboard_Road"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"Waferboard_Road"}]},{"method":"addTiles","args":["https://servicesmatriciels.mern.gouv.qc.ca:443/erdas-iws/ogc/wmts/Inventaire_Ecoforestier/Inventaire_Ecoforestier/default/GoogleMapsCompatibleExt2:epsg:3/{z}/{y}/{x}.jpg",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false}]}],"fitBounds":[48.4223309830458,-81.4570400200016,48.4269805880969,-81.4497810140878,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
</div>
<div id="data-method-and-application" class="section level3 hasAnchor" number="6.3.2">
<h3><span class="header-section-number">6.3.2</span> Data, Method, and Application<a href="sec-case-studies.html#data-method-and-application" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The following sections present example code and method implementation for applying the <code>measure_roads()</code> function to update an existing road that crosses a waterbody. In this case, a bridge crosses the waterbody. If there was no bridge, the method would interpret the waterbody as an impassable obstacle. The <code>measure_roads()</code> standard parameters (see section <a href="sec-standard-parameters.html#sec-standard-parameters">5</a>) are sufficient for updating roads that cross bridges.</p>
<div id="required-r-packages" class="section level4 hasAnchor" number="6.3.2.1">
<h4><span class="header-section-number">6.3.2.1</span> Required R Packages:<a href="sec-case-studies.html#required-r-packages" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="sec-case-studies.html#cb27-1" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;Jean-Romain/ALSroads&quot;</span>) <span class="co">#Install the ALSroads Package</span></span>
<span id="cb27-2"><a href="sec-case-studies.html#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="sec-case-studies.html#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;ALSroads&quot;</span>) </span>
<span id="cb27-4"><a href="sec-case-studies.html#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;lidR&quot;</span>)</span>
<span id="cb27-5"><a href="sec-case-studies.html#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;raster&quot;</span>)</span>
<span id="cb27-6"><a href="sec-case-studies.html#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;sf&quot;</span>)</span>
<span id="cb27-7"><a href="sec-case-studies.html#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;ggplot2&quot;</span>)</span></code></pre></div>
</div>
<div id="loading-data" class="section level4 hasAnchor" number="6.3.2.2">
<h4><span class="header-section-number">6.3.2.2</span> Loading Data:<a href="sec-case-studies.html#loading-data" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="sec-case-studies.html#cb28-1" aria-hidden="true" tabindex="-1"></a>ctg <span class="ot">&lt;-</span> readLAScatalog<span class="st">&quot;path/to/ctg/files&quot;</span>, filter <span class="ot">=</span> <span class="st">&quot;-drop_withheld-keep_random_fraction 0.25&quot;</span><span class="er">)</span></span>
<span id="cb28-2"><a href="sec-case-studies.html#cb28-2" aria-hidden="true" tabindex="-1"></a>dtm <span class="ot">&lt;-</span> <span class="fu">raster</span>(<span class="st">&quot;path/to/dtm.tif&quot;</span>)</span>
<span id="cb28-3"><a href="sec-case-studies.html#cb28-3" aria-hidden="true" tabindex="-1"></a>roads <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;path/to/roads&quot;</span>)</span>
<span id="cb28-4"><a href="sec-case-studies.html#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="sec-case-studies.html#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(roads) <span class="ot">=</span> <span class="fu">st_crs</span>(ctg)</span>
<span id="cb28-6"><a href="sec-case-studies.html#cb28-6" aria-hidden="true" tabindex="-1"></a>roads <span class="ot">=</span> sf<span class="sc">::</span><span class="fu">st_crop</span>(roads, ctg)</span></code></pre></div>
</div>
<div id="road-extraction" class="section level4 hasAnchor" number="6.3.2.3">
<h4><span class="header-section-number">6.3.2.3</span> Road Extraction:<a href="sec-case-studies.html#road-extraction" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="sec-case-studies.html#cb29-1" aria-hidden="true" tabindex="-1"></a>updated_road <span class="ot">&lt;-</span> <span class="fu">measure_roads</span>(<span class="at">ctg =</span> ctg, <span class="at">roads =</span> road, <span class="at">dtm =</span> dtm)</span></code></pre></div>
</div>
</div>
<div id="results" class="section level3 hasAnchor" number="6.3.3">
<h3><span class="header-section-number">6.3.3</span> Results<a href="sec-case-studies.html#results" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The ability of the <code>meaure_roads()</code> function to update a road that crosses a waterbody and interpret the bridge as part of the road is important for producing a fully connected road network. In this example, the width of the bridge means that there are many points located on it. The algorithm is able to interpret the bridge as a road of Class 1, with an average drivable width of 9.1 m.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="sec-case-studies.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(dtm_cs2)</span>
<span id="cb30-2"><a href="sec-case-studies.html#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(updated_road_cs2[<span class="dv">1</span>], <span class="at">add =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="ALSroads-book_files/figure-html/plot-rd-1.png" width="768"  style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="case-study-3-detecting-narrow-roads" class="section level2 hasAnchor" number="6.4">
<h2><span class="header-section-number">6.4</span> Case Study 3: Detecting Narrow Roads<a href="sec-case-studies.html#case-study-3-detecting-narrow-roads" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="overview-2" class="section level3 hasAnchor" number="6.4.1">
<h3><span class="header-section-number">6.4.1</span> Overview<a href="sec-case-studies.html#overview-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The road extraction method developed by <a href="https://www.sciencedirect.com/science/article/pii/S1569843222002084#d1e1483">Roussel et al. (2022)</a> is suitable for locating narrow roads. The method locates roads using several road characteristics, including DTM complexity, embankments, and vegetation. Provided that these characteristics are distinct enough to locate the road centerline, the width of the road will not impact the ability of the algorithm to find the road. However, the method parameters do specify that the road width must be over 1 m. A road with a width of less than 1 m is unlikely to be a road that is drivable by standard vehicles. The figure below visualizes a narrow road of 0.8 m in width, which is impacted by vegetation and is not drivable.</p>
<p><img src="images/las_circle_veg.PNG" /></p>
<p>In this case study, we demonstrate the effectiveness of the <code>measure_roads()</code> function for relocating a narrow road with a drivable road width of 1.2 m. Users can adjust the standard parameters to specify the minimum road width and road buffer (see section <a href="sec-standard-parameters.html#sec-extraction-parameters">5.1</a> and <a href="sec-standard-parameters.html#sec-state-parameters">5.6</a>. For example, if a user applies the method in an area where roads must be over 2 m (for a specific vehicle), they can set the minimum road width to 2 m. Or, if users know that in their study area, road centerline inaccuracies are very minimal, they can adjust the road buffer zone to find the correct road centerline within a short distance of the existing centerline, as the figure below visualizes.</p>
<p><img src="images/buffer_case_study.png" /></p>
<p>We update a road in the Dog River-Matawin Forest in Ontario. We do not change the standard parameters in this case study, as they are sufficient for updating narrow roads. The road is narrow and in a generally flat area but can be detected, as the DTM below demonstrates.</p>
<p><img src="images/dtm_road.png" /></p>
</div>
<div id="data-method-and-application-1" class="section level3 hasAnchor" number="6.4.2">
<h3><span class="header-section-number">6.4.2</span> Data, Method, and Application<a href="sec-case-studies.html#data-method-and-application-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The following sections present example code and method implementation applying the <code>measure_roads()</code> function to update a narrow road using standard parameters.</p>
<div id="required-r-packages-1" class="section level4 hasAnchor" number="6.4.2.1">
<h4><span class="header-section-number">6.4.2.1</span> Required R Packages:<a href="sec-case-studies.html#required-r-packages-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="sec-case-studies.html#cb31-1" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;Jean-Romain/ALSroads&quot;</span>) <span class="co">#Install the ALSroads Package</span></span>
<span id="cb31-2"><a href="sec-case-studies.html#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="sec-case-studies.html#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;ALSroads&quot;</span>) </span>
<span id="cb31-4"><a href="sec-case-studies.html#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;lidR&quot;</span>)</span>
<span id="cb31-5"><a href="sec-case-studies.html#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;raster&quot;</span>)</span>
<span id="cb31-6"><a href="sec-case-studies.html#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;sf&quot;</span>)</span>
<span id="cb31-7"><a href="sec-case-studies.html#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;ggplot2&quot;</span>)</span></code></pre></div>
</div>
<div id="loading-data-1" class="section level4 hasAnchor" number="6.4.2.2">
<h4><span class="header-section-number">6.4.2.2</span> Loading Data:<a href="sec-case-studies.html#loading-data-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="sec-case-studies.html#cb32-1" aria-hidden="true" tabindex="-1"></a>ctg <span class="ot">&lt;-</span> readLAScatalog<span class="st">&quot;path/to/ctg/files&quot;</span>, filter <span class="ot">=</span> <span class="st">&quot;-drop_withheld-keep_random_fraction 0.25&quot;</span><span class="er">)</span></span>
<span id="cb32-2"><a href="sec-case-studies.html#cb32-2" aria-hidden="true" tabindex="-1"></a>dtm <span class="ot">&lt;-</span> <span class="fu">raster</span>(<span class="st">&quot;path/to/dtm.tif&quot;</span>)</span>
<span id="cb32-3"><a href="sec-case-studies.html#cb32-3" aria-hidden="true" tabindex="-1"></a>roads <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;path/to/roads&quot;</span>)</span>
<span id="cb32-4"><a href="sec-case-studies.html#cb32-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-5"><a href="sec-case-studies.html#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(roads) <span class="ot">=</span> <span class="fu">st_crs</span>(ctg)</span>
<span id="cb32-6"><a href="sec-case-studies.html#cb32-6" aria-hidden="true" tabindex="-1"></a>roads <span class="ot">=</span> sf<span class="sc">::</span><span class="fu">st_crop</span>(roads, ctg)</span></code></pre></div>
</div>
<div id="road-extraction-1" class="section level4 hasAnchor" number="6.4.2.3">
<h4><span class="header-section-number">6.4.2.3</span> Road Extraction:<a href="sec-case-studies.html#road-extraction-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The standard <code>measure_roads()</code> parameters are sufficient for updating a narrow road.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="sec-case-studies.html#cb33-1" aria-hidden="true" tabindex="-1"></a>updated_roads_custom_param <span class="ot">&lt;-</span> <span class="fu">measure_roads</span>(<span class="at">ctg =</span> ctg, <span class="at">roads =</span> roads, <span class="at">dtm =</span> dtm, <span class="at">param =</span> custom_param)</span></code></pre></div>
</div>
</div>
<div id="results-1" class="section level3 hasAnchor" number="6.4.3">
<h3><span class="header-section-number">6.4.3</span> Results<a href="sec-case-studies.html#results-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The updated road is relocated accurately, and the new road linestring includes information about the state and width of the road, as well as the road curvature, shoulders, and canopy cover. From the results, we can plot the road width and visualize the footprint of the road on the landscape.</p>
<div id="htmlwidget-775e56c5e4eaf6edb8c8" style="width:768px;height:576px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-775e56c5e4eaf6edb8c8">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["line",430]},{"method":"addFlatGeoBuf","args":["CorrectedRoad","CorrectedRoad",null,true,"1",{"radius":6,"stroke":true,"color":"#0000FF","weight":2,"opacity":0.9,"fill":false,"fillColor":null,"fillOpacity":1},{"className":"","pane":"line"},"mapview-popup",{"radius":{"to":[3,15],"from":[3,15]},"weight":{"to":[1,10],"from":[1,10]},"opacity":{"to":[0,1],"from":[0,1]},"fillOpacity":{"to":[0,1],"from":[0,1]}}]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[-90.9585197488324,49.3295113087953,-90.9578794093393,49.3300608970623,true,"CorrectedRoad","Zoom to CorrectedRoad","<strong> CorrectedRoad <\/strong>","bottomright"]},{"method":"addLegend","args":[{"colors":["#0000FF"],"labels":["CorrectedRoad"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"CorrectedRoad"}]},{"method":"createMapPane","args":["polygon",420]},{"method":"addFlatGeoBuf","args":["RoadWidthBuffer","RoadWidthBuffer",null,true,"1",{"radius":6,"stroke":true,"color":"#FFA500","weight":0.5,"opacity":0.9,"fill":true,"fillColor":"#FFA500","fillOpacity":0.6},{"className":"","pane":"polygon"},"mapview-popup",{"radius":{"to":[3,15],"from":[3,15]},"weight":{"to":[1,10],"from":[1,10]},"opacity":{"to":[0,1],"from":[0,1]},"fillOpacity":{"to":[0,1],"from":[0,1]}}]},{"method":"addHomeButton","args":[-90.9585307562118,49.3295041146662,-90.9578684019377,49.3300680911252,true,"RoadWidthBuffer","Zoom to RoadWidthBuffer","<strong> RoadWidthBuffer <\/strong>","bottomright"]},{"method":"addLayersControl","args":["Esri.WorldImagery",["CorrectedRoad","RoadWidthBuffer"],{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#FFA500"],"labels":["RoadWidthBuffer"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"RoadWidthBuffer"}]},{"method":"addHomeButton","args":[-90.9585307562118,49.3295041146662,-90.9578684019377,49.3300680911252,true,null,"Zoom to full extent","<strong>Zoom full<\/strong>","bottomleft"]},{"method":"addTiles","args":["https://servicesmatriciels.mern.gouv.qc.ca:443/erdas-iws/ogc/wmts/Inventaire_Ecoforestier/Inventaire_Ecoforestier/default/GoogleMapsCompatibleExt2:epsg:3/{z}/{y}/{x}.jpg",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false}]}],"fitBounds":[49.3295041146662,-90.9585307562118,49.3300680911252,-90.9578684019377,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
</div>
</div>
<div id="case-study-4-detecting-a-road-covered-by-deciduous-trees" class="section level2 hasAnchor" number="6.5">
<h2><span class="header-section-number">6.5</span> Case study 4: Detecting a Road Covered by Deciduous Trees<a href="sec-case-studies.html#case-study-4-detecting-a-road-covered-by-deciduous-trees" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="overview-3" class="section level3 hasAnchor" number="6.5.1">
<h3><span class="header-section-number">6.5.1</span> Overview<a href="sec-case-studies.html#overview-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In the following example, the road is barely invisible from above because it is completely covered by deciduous trees. Using RGB images or using a CHM, it is impossible to find and measure the road.</p>
<p><img src="images/kenauk-rgb.png" style="width:70.0%" /></p>
<p>The <code>ALSroads</code> uses multiple inputs to locate roads (i.e., DTM, CHM, density of ground points, etc.) and does not rely exclusively on the CHM to find the road. Therefore, even a road totally covered by deciduous trees can be located. In this specific case study, the road is visible in the DTM. It is also visible in the density of ground points.</p>
<p><img src="images/kenauk-shadeddtm.png" style="width:70.0%" /></p>
<p>Overall, the road is visible in LiDAR data, even if some indicators, such as the CHM, cannot be used independently to locate the road. Therefore, this edge case works ‘out-of-the-box’ and the conductivity layer effectively highlights the road on the landscape, despite the road being covered by deciduous trees.</p>
<p><img src="images/kenauk-condutivity.png" style="width:70.0%" /></p>
<p>Using the <code>measure_road()</code> function the road is properly located and measured ‘out-of-the-box’ with standard parameters (see section <a href="sec-standard-parameters.html#sec-standard-parameters">5</a>. The road is particularly well-shaped and measuring its width (total and drivable) is not a problem. Here, the algorithm measured an 8.6 m ‘Class 1’ road. In the image below, we can see in purple the original inaccurate track of the official map and in yellow the new track with additional attributes.</p>
<p><img src="images/kenauk-final.png" style="width:70.0%" /></p>
</div>
<div id="data-method-and-application-2" class="section level3 hasAnchor" number="6.5.2">
<h3><span class="header-section-number">6.5.2</span> Data, Method, and Application<a href="sec-case-studies.html#data-method-and-application-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The following sections present example code and method implementation applying the <code>measure_roads()</code> function to update a road covered by deciduous trees.</p>
<div id="required-r-packages-2" class="section level4 hasAnchor" number="6.5.2.1">
<h4><span class="header-section-number">6.5.2.1</span> Required R Packages:<a href="sec-case-studies.html#required-r-packages-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="sec-case-studies.html#cb34-1" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;Jean-Romain/ALSroads&quot;</span>) <span class="co">#Install the ALSroads Package</span></span>
<span id="cb34-2"><a href="sec-case-studies.html#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="sec-case-studies.html#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;ALSroads&quot;</span>) </span>
<span id="cb34-4"><a href="sec-case-studies.html#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;lidR&quot;</span>)</span>
<span id="cb34-5"><a href="sec-case-studies.html#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;raster&quot;</span>)</span>
<span id="cb34-6"><a href="sec-case-studies.html#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;sf&quot;</span>)</span>
<span id="cb34-7"><a href="sec-case-studies.html#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;ggplot2&quot;</span>)</span></code></pre></div>
</div>
<div id="loading-data-2" class="section level4 hasAnchor" number="6.5.2.2">
<h4><span class="header-section-number">6.5.2.2</span> Loading Data:<a href="sec-case-studies.html#loading-data-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="sec-case-studies.html#cb35-1" aria-hidden="true" tabindex="-1"></a>ctg <span class="ot">&lt;-</span> readLAScatalog<span class="st">&quot;path/to/ctg/files&quot;</span>, filter <span class="ot">=</span> <span class="st">&quot;-drop_withheld-keep_random_fraction 0.25&quot;</span><span class="er">)</span></span>
<span id="cb35-2"><a href="sec-case-studies.html#cb35-2" aria-hidden="true" tabindex="-1"></a>dtm <span class="ot">&lt;-</span> <span class="fu">raster</span>(<span class="st">&quot;path/to/dtm.tif&quot;</span>)</span>
<span id="cb35-3"><a href="sec-case-studies.html#cb35-3" aria-hidden="true" tabindex="-1"></a>roads <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;path/to/roads&quot;</span>)</span>
<span id="cb35-4"><a href="sec-case-studies.html#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="sec-case-studies.html#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(roads) <span class="ot">=</span> <span class="fu">st_crs</span>(ctg)</span>
<span id="cb35-6"><a href="sec-case-studies.html#cb35-6" aria-hidden="true" tabindex="-1"></a>roads <span class="ot">=</span> sf<span class="sc">::</span><span class="fu">st_crop</span>(roads, ctg)</span></code></pre></div>
</div>
<div id="road-extraction-2" class="section level4 hasAnchor" number="6.5.2.3">
<h4><span class="header-section-number">6.5.2.3</span> Road Extraction:<a href="sec-case-studies.html#road-extraction-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The standard <code>measure_roads()</code> parameters are sufficient for updating the road in the case study.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="sec-case-studies.html#cb36-1" aria-hidden="true" tabindex="-1"></a>updated_roads_custom_param <span class="ot">&lt;-</span> <span class="fu">measure_roads</span>(<span class="at">ctg =</span> ctg, <span class="at">roads =</span> roads, <span class="at">dtm =</span> dtm, <span class="at">param =</span> custom_param)</span></code></pre></div>
</div>
</div>
<div id="results-2" class="section level3 hasAnchor" number="6.5.3">
<h3><span class="header-section-number">6.5.3</span> Results:<a href="sec-case-studies.html#results-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Despite being covered by deciduous trees the updated road is relocated accurately and includes information on the road width. From the results, we can plot the road and visualize the footprint of the road on the dense deciduous forest landscape.</p>

<pre><code>#&gt; Reading layer `roads&#39; from data source `E:\ALSroads_Guide\data\08\roads.shp&#39; using driver `ESRI Shapefile&#39;
#&gt; Simple feature collection with 23 features and 20 fields
#&gt; Geometry type: LINESTRING
#&gt; Dimension:     XY
#&gt; Bounding box:  xmin: 570000 ymin: 5151000 xmax: 573000 ymax: 5154000
#&gt; Projected CRS: NAD83(CSRS) / UTM zone 17N
#&gt; Reading layer `updated_roads&#39; from data source `E:\ALSroads_Guide\data\08\updated_roads.shp&#39; using driver `ESRI Shapefile&#39;
#&gt; Simple feature collection with 23 features and 28 fields
#&gt; Geometry type: LINESTRING
#&gt; Dimension:     XY
#&gt; Bounding box:  xmin: 570006.3 ymin: 5151000 xmax: 573000.8 ymax: 5153997
#&gt; Projected CRS: NAD83(CSRS) / UTM zone 17N</code></pre>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="sec-standard-parameters.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="sec-tips-and-tricks.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
